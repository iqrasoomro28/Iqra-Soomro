<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Personal Blog</title>
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS for the retro theme --><style>
        /* Use a pixelated font if available, otherwise mono */
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        body {
            /* Fallback font */
            font-family: 'VT323', monospace;
            /* Removed the glowing text-shadow for a softer, antique feel */
        }
        
        /* Blinking cursor animation */
        .blinking-cursor {
            animation: blink 1s step-end infinite;
        }
        
        @keyframes blink {
            50% { 
                opacity: 0; 
            }
        }
        
        /* Custom blocky shadow for the "window" effect */
        .retro-window {
            border: 2px solid #6A7B61; /* Vintage Green */
            /* A solid, blocky shadow */
            box-shadow: 4px 4px 0px #4A5543; /* Vintage Medium-Dark Green */
            background-color: #FDFDFD; /* Light cream/off-white for contrast on light pink background */
        }
        
        .retro-window-header {
            border-bottom: 2px solid #6A7B61; /* Vintage Green */
            background-color: #EAE0E0; /* Dim pink for header background */
        }
        
        /* Scanlines effect for the background */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(
                rgba(0, 0, 0, 0.03) 1px, /* Darker scanlines for a light background */
                transparent 1px
            );
            background-size: 1px 3px;
            opacity: 0.5;
            pointer-events: none;
            z-index: 1000;
        }

        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            padding-top: 60px;
        }
        .modal-content {
            margin: 5% auto;
            padding: 0;
            width: 90%;
            max-width: 500px;
        }
        .modal-body {
            padding: 20px;
            color: #22251F; /* Very dark green for text on light modal body */
        }
        .modal-footer {
            padding: 10px 20px;
            border-top: 2px solid #6A7B61; /* v-green */
            background-color: #EAE0E0; /* Dim pink for modal footer */
        }
        .modal-close-btn {
            background-color: #6A7B61;
            color: #FDFDFD; /* Light cream text for button */
            padding: 5px 10px;
            border: none;
            cursor: pointer;
        }
        .modal-close-btn:hover {
            background-color: #4A5543; /* v-md-green */
            color: #FDFDFD; /* Light cream text */
        }
    </style>
    
    <!-- Tailwind Configuration --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['VT323', 'monospace'],
                    },
                    colors: {
                        'v-bg': '#FDF1F2',         // Light pink for page bg
                        'v-dk-green': '#282C24',   // Dark green for strong contrast text
                        'v-md-green': '#4A5543',   // Medium-dark green for shadow, accents
                        'v-green': '#6A7B61',      // Main green for borders, dates, some text
                        'v-lt-pink': '#EAE0E0',    // Dim pink for softer accents, hover backgrounds
                        'v-lt-pink-header': '#D4BABA', // Medium pink for main headers
                        'v-md-pink': '#F7D7DB',    // Lighter pink for hover backgrounds on text
                        'v-post-text': '#282C24',  // Dark green for general post text on light background
                        'v-link-hover-text': '#22251F', // Very dark green for link hover text
                        'v-window-bg': '#FDFDFD', // Light cream/off-white for window backgrounds
                        'v-header-bg': '#EAE0E0', // Dim pink for header backgrounds
                    }
                },
            },
        }
    </script>
</head>
<body class="bg-v-bg text-v-post-text font-mono p-4 md:p-8 relative">

    <div class="max-w-6xl mx-auto">
        
        <!-- Header Section --><header class="mb-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold text-v-lt-pink-header mb-4">
                &gt; CODEX_&_CUTLERY<span class="blinking-cursor">_</span>
            </h1>
            <nav class="retro-window inline-block bg-v-window-bg"> <!-- Added bg-v-window-bg --><ul class="flex divide-x-2 divide-v-green">
                    <li class="px-4 py-2"><a href="#" class="hover:text-v-link-hover-text hover:bg-v-md-pink p-1">HOME</a></li>
                    <li class="px-4 py-2"><a href="#" class="hover:text-v-link-hover-text hover:bg-v-md-pink p-1">FINDS</a></li>
                    <li class="px-4 py-2"><a href="#" class="hover:text-v-link-hover-text hover:bg-v-md-pink p-1">CODE</a></li>
                    <li class="px-4 py-2"><a href="#" class="hover:text-v-link-hover-text hover:bg-v-md-pink p-1">ABOUT</a></li>
                </ul>
            </nav>
        </header>

        <!-- Main Content Area --><div class="md:grid md:grid-cols-3 md:gap-8">
            
            <!-- Blog Posts (Main Column) --><main class="md:col-span-2 space-y-8">
                
                <!-- Blog Post 1 --><article class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h2 class="text-2xl text-v-dk-green">New Beginnings & Old Things</h2> <!-- Changed to v-dk-green for contrast --></header>
                    <div class="p-4 space-y-4">
                        <p class="text-sm text-v-green">POSTED: 2025-10-25</p>
                        <div id="post-1-content">
                            <p class="text-v-post-text">
                                Welcome to the new blog. I've built this little corner of the web to feel like the good old days. Less glowing terminals, more antique shops and dusty attics.
                            </p>
                            <p class="text-v-post-text">
                                This is a place to share my love for vintage cutlery, classic Casio watches, and the occasional bit of code. Hope you enjoy this little mix of interests.
                            </p>
                        </div>
                        <div class="flex space-x-4">
                            <a href="#" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ READ_MORE... ]</a> <!-- Changed to v-dk-green --><a href="#" onclick="summarizePost('summary-1', 'post-1-content'); return false;" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ ✨ SUMMARIZE ]</a> <!-- Changed to v-dk-green --></div>
                        <div id="summary-1" class="text-v-md-green mt-4 text-sm" style="display: none;"></div> <!-- Changed to v-md-green for text --></div>
                </article>

                <!-- Blog Post 2 --><article class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h2 class="text-2xl text-v-dk-green">A Love Letter to Casio</h2> <!-- Changed to v-dk-green --></header>
                    <div class="p-4 space-y-4">
                        <p class="text-sm text-v-green">POSTED: 2025-10-23</p>
                        <div id="post-2-content">
                            <p class="text-v-post-text">
                                There's just something about a good Casio watch. The F-91W. The databank. They're perfect examples of function-first design. No frills, just pure, reliable tech on your wrist.
                            </p>
                            <p class="text-v-post-text">
                                It's the same aesthetic I love in computer science: clean lines, logical systems, and an elegance that lasts for decades. Pure function, no bloat.
                            </p>
                        </div>
                        <div class="flex space-x-4">
                            <a href="#" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ READ_MORE... ]</a> <!-- Changed to v-dk-green --><a href="#" onclick="summarizePost('summary-2', 'post-2-content'); return false;" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ ✨ SUMMARIZE ]</a> <!-- Changed to v-dk-green --></div>
                        <div id="summary-2" class="text-v-md-green mt-4 text-sm" style="display: none;"></div> <!-- Changed to v-md-green for text --></div>
                </article>
                
                <!-- Blog Post 3 --><article class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h2 class="text-2xl text-v-dk-green">Spotted: A Northern Flicker</h2> <!-- Changed to v-dk-green --></header>
                    <div class="p-4 space-y-4">
                        <p class="text-sm text-v-green">POSTED: 2025-10-21</p>
                        <div id="post-3-content">
                            <p class="text-v-post-text">
                                Musings on nature. Had a wonderful moment this morning. Spotted a Northern Flicker on the old oak tree outside my window. The flash of red on its nape was stunning.
                            </p>
                            <p class="text-v-post-text">
                                It's a nice contrast to staring at code all day. Trying to get better at birdwatching.
                            </p>
                        </div>
                        <div class="flex space-x-4">
                            <a href="#" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ READ_MORE... ]</a> <!-- Changed to v-dk-green --><a href="#" onclick="summarizePost('summary-3', 'post-3-content'); return false;" class="inline-block mt-2 text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ ✨ SUMMARIZE ]</a> <!-- Changed to v-dk-green --></div>
                        <div id="summary-3" class="text-v-md-green mt-4 text-sm" style="display: none;"></div> <!-- Changed to v-md-green for text --></div>
                </article>

            </main>

            <!-- Sidebar --><aside class="md:col-span-1 space-y-8 mt-8 md:mt-0">
                
                <!-- About Me --><section class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h3 class="text-xl text-v-dk-green">[ ABOUT_ME ]</h3> <!-- Changed to v-dk-green --></header>
                    <div class="p-4">
                        <!-- Placeholder for a pixel-art avatar --><img 
                            src="file:///Users/iqra/Downloads/Gemini_Generated_Image_17wku317wku317wk.png" 
                            alt="Pixel art avatar" 
                            class="border-2 border-v-green mx-auto mb-4"
                            onerror="this.src='https://placehold.co/150x150/282C24/EAE0E0?text=AVATAR&font=vt323'"
                        >
                        <p class="text-v-post-text">
                            A CS student with a love for antique homewares. My style is a mix of desi and western fashion, and this blog is a mix of everything I love.
                        </p>
                    </div>
                </section>

                <!-- Gemini Post Helper --><section class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h3 class="text-xl text-v-dk-green">[ ✨ POST_HELPER ]</h3> <!-- Changed to v-dk-green --></header>
                    <div class="p-4 space-y-4">
                        <p class="text-v-post-text">Need inspiration?</p> <!-- Added text-v-post-text --><a href="#" id="generate-idea-btn" class="inline-block text-v-dk-green hover:text-v-link-hover-text hover:bg-v-md-pink p-1">[ GENERATE_IDEA ]</a> <!-- Changed to v-dk-green --><div id="idea-result" class="text-v-md-green mt-4 text-sm" style="display: none;"></div> <!-- Changed to v-md-green for text --></div>
                </section>
                
                <!-- Categories --><section class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h3 class="text-xl text-v-dk-green">[ CATEGORIES ]</h3> <!-- Changed to v-dk-green --></header>
                    <div class="p-4">
                        <ul class="space-y-2">
                            <li><a href="comp-sci.html" class="text-v-dk-green hover:text-v-link-hover-text">&gt; COMP_SCI</a></li> <!-- Changed to v-dk-green --><li><a href="comp-sci.html" class="text-v-dk-green hover:text-v-link-hover-text">&gt; VINTAGE_FINDS</a></li> <!-- Changed to v-dk-green --><li><a href="#" class="text-v-dk-green hover:text-v-link-hover-text">&gt; BIRDING</a></li> <!-- Changed to v-dk-green --><li><a href="comp-sci.html" class="text-v-dk-green hover:text-v-link-hover-text">&gt; FASHION</a></li> <!-- Changed to v-dk-green --></ul>
                    </div>
                </section>
                
                <!-- Archives --><section class="retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 bg-v-header-bg"> <!-- Added bg-v-header-bg --><h3 class="text-xl text-v-dk-green">[ ARCHIVES ]</h3> <!-- Changed to v-dk-green --></header>
                    <div class="p-4">
                        <ul class="space-y-2">
                            <li><a href="#" class="text-v-dk-green hover:text-v-link-hover-text">&gt; OCTOBER 2025</a></li> <!-- Changed to v-dk-green --><li><a href="#" class="text-v-dk-green hover:text-v-link-hover-text">&gt; SEPTEMBER 2025</a></li> <!-- Changed to v-dk-green --><li><a href="#" class="text-v-dk-green hover:text-v-link-hover-text">&gt; AUGUST 2025</a></li> <!-- Changed to v-dk-green --></ul>
                    </div>
                </section>

            </aside>
        </div>

        <!-- Footer --><footer class="mt-12 pt-8 border-t-2 border-dashed border-v-md-green text-center text-v-green text-sm">
            <p>(C) 2025 YOUR_NAME_HERE. ALL RIGHTS RESERVED.</p>
            <p>SYSTEM ONLINE. READY.</p>
        </footer>

    </div>

    <!-- Error Modal --><div id="errorModal" class="modal">
        <div class="modal-content retro-window bg-v-window-bg"> <!-- Added bg-v-window-bg --><header class="retro-window-header p-2 flex justify-between items-center bg-v-header-bg"> <!-- Added bg-v-header-bg --><h3 class="text-xl text-v-dk-green">[ SYSTEM_ERROR ]</h3> <!-- Changed to v-dk-green --></header>
            <div class="modal-body">
                <p id="errorMessage"></p>
            </div>
            <footer class="modal-footer text-right">
                <button id="closeModalBtn" class="modal-close-btn">[ OK ]</button>
            </footer>
        </div>
    </div>

    <!-- Gemini API Script --><script>
        // The API key is left as an empty string.
        // In a real environment, this would be securely provided.
        const apiKey = ""; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // --- Modal Logic ---
        const modal = document.getElementById("errorModal");
        const closeModalBtn = document.getElementById("closeModalBtn");
        const errorMessage = document.getElementById("errorMessage");

        closeModalBtn.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        
        function showErrorModal(message) {
            errorMessage.textContent = `ERROR: ${message}. Check console for details. Make sure API key is valid.`;
            modal.style.display = "block";
        }

        // --- API Call Logic ---
        async function callGemini(prompt, targetElement, loadingText = "...", maxRetries = 3) {
            targetElement.style.display = "block";
            targetElement.textContent = loadingText;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        
                        const text = result.candidates[0].content.parts[0].text;
                        targetElement.textContent = text;
                        return; // Success
                    } else {
                        throw new Error("Invalid API response structure.");
                    }

                } catch (error) {
                    console.error("API call failed:", error);
                    attempt++;
                    if (attempt >= maxRetries) {
                        targetElement.textContent = `[ API call failed. ]`;
                        showErrorModal(error.message);
                        return; // Failed after retries
                    }
                    // Exponential backoff
                    const delay = Math.pow(2, attempt) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        // --- Event Handlers ---

        // Summarize Post
        function summarizePost(summaryElementId, contentElementId) {
            const contentElement = document.getElementById(contentElementId);
            const summaryElement = document.getElementById(summaryElementId);
            
            if (contentElement && summaryElement) {
                const postText = contentElement.textContent || contentElement.innerText;
                const prompt = `Summarize the following blog post in one short, engaging sentence:\n\n"${postText}"`;
                callGemini(prompt, summaryElement, "GENERATING_SUMMARY...");
            }
        }

        // Generate Post Idea
        const generateIdeaBtn = document.getElementById("generate-idea-btn");
        const ideaResultElement = document.getElementById("idea-result");

        if (generateIdeaBtn && ideaResultElement) {
            generateIdeaBtn.addEventListener("click", function(e) {
                e.preventDefault();
                const prompt = "Generate one blog post idea for a person who loves computer science, vintage cutlery, antique homewares, birdwatching, and indie fashion that mixes desi and western styles. Make the idea creative and specific.";
                callGemini(prompt, ideaResultElement, "GENERATING_IDEA...");
            });
        }

    </script>
</body>
</html>

